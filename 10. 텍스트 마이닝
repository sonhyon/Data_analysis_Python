ğŸ“˜ [ëŒ€í†µë ¹ ì—°ì„¤ë¬¸ í…ìŠ¤íŠ¸ ë§ˆì´ë‹]
1. KoNLPy íŒ¨í‚¤ì§€ ì„¤ì¹˜í•˜ê¸°
# ì‚¬ì „ ì„¤ì¹˜ (í„°ë¯¸ë„ì—ì„œ ì‹¤í–‰)
brew install openjdk      # macOSì¼ ê²½ìš°
choco install openjdk     # Windowsì¼ ê²½ìš°

pip install jpype1
pip install konlpy

2. ì—°ì„¤ë¬¸ ë¶ˆëŸ¬ì˜¤ê¸°
moon = open('speech_moon.txt', encoding='UTF-8').read()
print(moon[:500])  # ì•ë¶€ë¶„ í™•ì¸

3. ë¶ˆí•„ìš”í•œ ë¬¸ì ì œê±°
import re
moon = re.sub('[^ê°€-í£]', ' ', moon)
print(moon[:500])

4. ëª…ì‚¬ ì¶”ì¶œ ë° ë‹¨ì–´ ë¹ˆë„ ë¶„ì„
from konlpy.tag import Hannanum
hannanum = Hannanum()
nouns = hannanum.nouns(moon)

import pandas as pd
df_word = pd.DataFrame({'word': nouns})
df_word['count'] = df_word['word'].str.len()
df_word = df_word.query('count >= 2')

df_word = df_word.groupby('word', as_index=False) \
                 .agg(n=('word', 'count')) \
                 .sort_values('n', ascending=False)
print(df_word.head())

5. ë‹¨ì–´ ë¹ˆë„ ë§‰ëŒ€ ê·¸ë˜í”„
import seaborn as sns
import matplotlib.pyplot as plt

top20 = df_word.head(20)

plt.rcParams.update({'font.family': 'Malgun Gothic',
                     'figure.dpi': 120,
                     'figure.figsize': [6.5, 6]})
sns.barplot(data=top20, y='word', x='n')
plt.title('ê°€ì¥ ë§ì´ ì‚¬ìš©ëœ ë‹¨ì–´ TOP20')
plt.show()

6. ì›Œë“œ í´ë¼ìš°ë“œ ë§Œë“¤ê¸°
pip install wordcloud

from wordcloud import WordCloud

font = 'DoHyeon-Regular.ttf'  # í•œê¸€ í°íŠ¸ ê²½ë¡œ
dic_word = df_word.set_index('word').to_dict()['n']

wc = WordCloud(random_state=1234,
               font_path=font,
               width=400,
               height=400,
               background_color='white')

img_wordcloud = wc.generate_from_frequencies(dic_word)

plt.figure(figsize=(10, 10))
plt.axis('off')
plt.imshow(img_wordcloud)
plt.show()

7. ì›Œë“œ í´ë¼ìš°ë“œ ëª¨ì–‘ ë°”ê¾¸ê¸°
from PIL import Image
import numpy as np

icon = Image.open('cloud.png')  # ë§ˆìŠ¤í¬ ì´ë¯¸ì§€
img = Image.new('RGB', icon.size, (255, 255, 255))
img.paste(icon, icon)
img = np.array(img)

wc = WordCloud(random_state=1234,
               font_path=font,
               width=400,
               height=400,
               background_color='white',
               mask=img)

img_wordcloud = wc.generate_from_frequencies(dic_word)

plt.figure(figsize=(10, 10))
plt.axis('off')
plt.imshow(img_wordcloud)
plt.show()

8. ì›Œë“œ í´ë¼ìš°ë“œ ìƒ‰ìƒ ë³€ê²½
wc = WordCloud(random_state=1234,
               font_path=font,
               width=400,
               height=400,
               background_color='white',
               mask=img,
               colormap='inferno')

img_wordcloud = wc.generate_from_frequencies(dic_word)

plt.figure(figsize=(10, 10))
plt.axis('off')
plt.imshow(img_wordcloud)
plt.show()

ğŸ— [ê¸°ì‚¬ ëŒ“ê¸€ í…ìŠ¤íŠ¸ ë§ˆì´ë‹]
1. ê¸°ì‚¬ ëŒ“ê¸€ ë¶ˆëŸ¬ì˜¤ê¸°
df = pd.read_csv('news_comment_BTS.csv', encoding='UTF-8')
df.info()

2. ë¶ˆí•„ìš”í•œ ë¬¸ì ì œê±°
df['reply'] = df['reply'].str.replace('[^ê°€-í£]', ' ', regex=True)
df['reply'].head()

3. ëª…ì‚¬ ì¶”ì¶œ
from konlpy.tag import Kkma
kkma = Kkma()

nouns = df['reply'].apply(kkma.nouns)

4. ë‹¨ì–´ ë¹ˆë„í‘œ ë§Œë“¤ê¸°
nouns = nouns.explode()

df_word = pd.DataFrame({'word': nouns})
df_word['count'] = df_word['word'].str.len()
df_word = df_word.query('count >= 2')

df_word = df_word.groupby('word', as_index=False) \
                 .agg(n=('word', 'count')) \
                 .sort_values('n', ascending=False)

5. ë‹¨ì–´ ë¹ˆë„ ë§‰ëŒ€ ê·¸ë˜í”„
top20 = df_word.head(20)

plt.rcParams.update({'font.family': 'Malgun Gothic',
                     'figure.figsize': [6.5, 6]})
sns.barplot(data=top20, y='word', x='n')
plt.title('ê¸°ì‚¬ ëŒ“ê¸€ ë‹¨ì–´ ë¹ˆë„ TOP20')
plt.show()

6. ì›Œë“œ í´ë¼ìš°ë“œ ë§Œë“¤ê¸°
dic_word = df_word.set_index('word').to_dict()['n']

wc = WordCloud(random_state=1234,
               font_path=font,
               width=400,
               height=400,
               background_color='white',
               mask=img)

img_wordcloud = wc.generate_from_frequencies(dic_word)

plt.figure(figsize=(10, 10))
plt.axis('off')
plt.imshow(img_wordcloud)
plt.show()
