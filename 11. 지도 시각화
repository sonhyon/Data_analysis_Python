ğŸ—ºï¸ [ì‹œêµ°êµ¬ë³„ ì¸êµ¬ ë‹¨ê³„ êµ¬ë¶„ë„ ë§Œë“¤ê¸°]
1. ì‹œêµ°êµ¬ ê²½ê³„ ì§€ë„ ë°ì´í„° ì¤€ë¹„í•˜ê¸°
import json

geo = json.load(open('SIG.geojson', encoding='UTF-8'))

# í™•ì¸ìš©
geo['features'][0]['properties']  # í–‰ì •êµ¬ì—­ ì½”ë“œ
geo['features'][0]['geometry']   # ìœ„ë„, ê²½ë„

2. ì‹œêµ°êµ¬ë³„ ì¸êµ¬ ë°ì´í„° ì¤€ë¹„í•˜ê¸°
import pandas as pd

df_pop = pd.read_csv('Population_SIG.csv')
df_pop.info()

# ì½”ë“œ ë¬¸ìì—´ë¡œ ë³€í™˜
df_pop['code'] = df_pop['code'].astype(str)

3. ë‹¨ê³„ êµ¬ë¶„ë„ ë§Œë“¤ê¸°
(1) folium ì„¤ì¹˜
pip install folium

(2) ê¸°ë³¸ ë°°ê²½ ì§€ë„ ë§Œë“¤ê¸°
import folium

map_sig = folium.Map(location=[35.95, 127.7],
                     zoom_start=8,
                     tiles='cartodbpositron')
map_sig

(3) Choropleth ê·¸ë¦¬ê¸° - ê¸°ë³¸
folium.Choropleth(
    geo_data=geo,
    data=df_pop,
    columns=('code', 'pop'),  # ì˜¤íƒ€: colums â†’ columns
    key_on='feature.properties.SIG_CD'
).add_to(map_sig)
map_sig

4. ê³„ê¸‰ êµ¬ê°„ê³¼ ë””ìì¸ ì„¤ì •
# ë¶„ìœ„ìˆ˜ ê¸°ì¤€ìœ¼ë¡œ êµ¬ê°„ ë‚˜ëˆ„ê¸°
bins = list(df_pop['pop'].quantile([0, 0.2, 0.4, 0.6, 0.8, 1]))
print(bins)

5. ìƒ‰ìƒ ë“± ìŠ¤íƒ€ì¼ ì§€ì •
map_sig = folium.Map(location=[35.95, 127.7],
                     zoom_start=8,
                     tiles='cartodbpositron')  # ì˜¤íƒ€: cartodbposition â†’ cartodbpositron

folium.Choropleth(
    geo_data=geo,
    data=df_pop,
    columns=('code', 'pop'),
    key_on='feature.properties.SIG_CD',
    fill_color='YlGnBu',
    fill_opacity=1,
    line_opacity=0.5,
    bins=bins
).add_to(map_sig)

map_sig


ğŸŒ [ì„œìš¸ì‹œ ë™ë³„ ì™¸êµ­ì¸ ì¸êµ¬ ë‹¨ê³„ êµ¬ë¶„ë„ ë§Œë“¤ê¸°]
1. ì„œìš¸ì‹œ ë™ ê²½ê³„ ì§€ë„ ë°ì´í„° ì¤€ë¹„
geo_seoul = json.load(open('EMD_Seoul.geojson', encoding='UTF-8'))

# í™•ì¸
geo_seoul['features'][0]['properties']
geo_seoul['features'][0]['geometry']

2. ì™¸êµ­ì¸ ì¸êµ¬ ë°ì´í„° ì¤€ë¹„
foreigner = pd.read_csv('Foreigner_EMD_Seoul.csv')  # ì˜¤íƒ€: Seould â†’ Seoul
foreigner.info()

# ì½”ë“œ ë¬¸ìì—´ë¡œ ë³€í™˜
foreigner['code'] = foreigner['code'].astype(str)

3. ë‹¨ê³„ êµ¬ë¶„ë„ ê·¸ë¦¬ê¸°
# ë¶„ìœ„ìˆ˜ ê¸°ì¤€ êµ¬ê°„
bins = list(foreigner['pop'].quantile([0, 0.2, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1]))
print(bins)

map_seoul = folium.Map(location=[37.56, 127.0],
                       zoom_start=12,
                       tiles='cartodbpositron')

folium.Choropleth(
    geo_data=geo_seoul,
    data=foreigner,
    columns=('code', 'pop'),  # ì˜¤íƒ€: colums â†’ columns
    key_on='feature.properties.ADM_DR_CD',
    fill_color='YlOrRd',
    fill_opacity=1,
    line_opacity=0.5,
    bins=bins
).add_to(map_seoul)

map_seoul

4. êµ¬ ê²½ê³„ì„  ì¶”ê°€í•˜ê¸°
geo_seoul_sig = json.load(open('SIG_Seoul.geojson', encoding='UTF-8'))

folium.Choropleth(
    geo_data=geo_seoul_sig,
    fill_opacity=0,  # ë‚´ë¶€ ìƒ‰ ì—†ìŒ
    line_weight=4,   # ê²½ê³„ì„  êµµê¸°
    line_color='black'  # ê²½ê³„ì„  ìƒ‰ìƒ ì¶”ê°€í•˜ë©´ ê°€ë…ì„± í–¥ìƒ
).add_to(map_seoul)

map_seoul
